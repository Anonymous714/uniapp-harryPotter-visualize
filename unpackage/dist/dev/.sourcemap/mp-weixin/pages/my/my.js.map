{"version":3,"sources":["uni-app:///main.js","webpack:///E:/andriod开发/HBuilder X/yuedu/pages/my/my.vue?16d5","webpack:///E:/andriod开发/HBuilder X/yuedu/pages/my/my.vue?375c","webpack:///E:/andriod开发/HBuilder X/yuedu/pages/my/my.vue?a100","webpack:///E:/andriod开发/HBuilder X/yuedu/pages/my/my.vue?44ef","uni-app:///pages/my/my.vue","webpack:///E:/andriod开发/HBuilder X/yuedu/pages/my/my.vue?7e22","webpack:///E:/andriod开发/HBuilder X/yuedu/pages/my/my.vue?6bf6"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA,wCAAmB;AACnB;AACA,mF;AACAA,UAAU,CAACC,WAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+G;AAC/G;AACsD;AACL;AACa;;;AAG9D;AACqL;AACrL,gBAAgB,8LAAU;AAC1B,EAAE,wEAAM;AACR,EAAE,6EAAM;AACR,EAAE,sFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA4qB,CAAgB,isBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC+BhsB;AACA,6B;AACA;AACA,MADA,kBACA;AACA;AACA;AACA,mBAFA;AAGA,cAHA;AAIA,wBAJA;AAKA,cALA;AAMA,mBANA;;AAQA,GAVA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA,GAjBA;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA,KACA,KADA,CACA;AACA;AACA,0CAFA,EADA;;AAKA,OALA;AAMA,QANA,CAMA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,4CAFA;AAGA,SAHA,CAGA;AACA,sBADA,EAHA;AAKA,UALA,CAKA;AACA;AACA;AACA;AACA;AACA,SAHA;AAIA;AACA;AACA,8CAFA,CAEA;AACA;AACA,OAfA,EAeA,KAfA,CAeA;AACA;AACA,OAjBA;AAkBA,KA9BA,EA8BA,KA9BA,CA8BA;AACA;AACA,KAhCA;AAiCA,GAhEA;AAiEA;AACA;AACA;AACA;AACA,gDADA;;AAGA,KANA;AAOA;AACA;AACA;AACA;AACA,mBADA;AAEA,0BAFA;AAGA;AACA;AACA;AACA,wBADA;AAEA,kBAFA;AAGA,gBAHA,CAGA;AACA;AACA;AACA;AACA;AACA,eAHA,MAGA;AACA;AACA;AACA,aAXA;AAYA,iBAZA,CAYA;AACA;AACA,aAdA;AAeA;AACA,SArBA;;AAuBA,KAjCA;AAkCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAFA;AAGA,SAHA,CAGA;AACA,sBADA,EAHA;AAKA,UALA,CAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SANA,MAMA;AACA;AACA;AACA,OAhBA,EAgBA,KAhBA,CAgBA;AACA;AACA,OAlBA;;AAoBA,KA5DA,EAjEA,E;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAA89B,CAAgB,w9BAAG,EAAC,C;;;;;;;;;;;ACAl/B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/my/my.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/my/my.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./my.vue?vue&type=template&id=0be17cc6&\"\nvar renderjs\nimport script from \"./my.vue?vue&type=script&lang=js&\"\nexport * from \"./my.vue?vue&type=script&lang=js&\"\nimport style0 from \"./my.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/my/my.vue\"\nexport default component.exports","export * from \"-!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./my.vue?vue&type=template&id=0be17cc6&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./my.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./my.vue?vue&type=script&lang=js&\"","<template>\n    <view class=\"grace-padding\">\n        <view class=\"myface\"><image :src=\"user.u_face\" mode=\"widthFix\"></image></view>\n        <view class=\"grace-box-banner\" style=\"margin:30rpx 120rpx 0 150rpx;\">\n            <view class=\"garce-items\">\n                <view class=\"line1\">{{myArtCount}}</text></view>\r\n                <view class=\"line2\">文章</view>\n            </view>\n            <view class=\"garce-items\">\n                <view class=\"line1\">{{user.u_integral}}</text></view>\n                <view class=\"line2\">积分</view>\n            </view>\n            <view class=\"garce-items\">\n                <view class=\"line1\">{{user.u_remainder}}</text></view>\n                <view class=\"line2\">余额</view>\n            </view>\n        </view>\n        <view class=\"grace-title grace-nowrap grace-space-between\">\n            <view class=\"grace-h5 grace-blod\">我的文章</view>\n        </view>\n        <view class=\"myart-list\" v-for=\"(item, index) in arts\" :key=\"index\">\n            <view class=\"title\">{{item.title}}</view>\n            <view class=\"btns\">\n                <view :data-artid=\"item._id\"  @tap=\"editArt\">编辑</view>\n                <view :data-artid=\"item._id\" :data-index=\"index\" @tap=\"removeArt\">删除</view>\n            </view>\n        </view>\n        <view class=\"loadMore\" @tap=\"getArtList\">{{loadMore}}</view>\n    </view>\n</template>\n<script>\nvar _self, loginRes, page = 1;\r\nconst db = uniCloud.database();\nexport default {\n    data() {\n        return {\n           // myFace : '',\r\n\t\t   artsPages:[],\n            arts : [],\n            loadMore : \"点击加载更多\",\n            user : {},\r\n\t\t\tmyArtCount:0\n        };\n    },\n    onLoad:function(){\n        _self = this;\r\n\t\t//uni.clearStorageSync();\n        loginRes = this.checkLogin('../my/my', '2');\n        if(!loginRes){return false;}\n        //this.myFace = loginRes[3];\n    },\n    onShow:function(){\r\n\t\t//uni.clearStorageSync();\r\n\t\tloginRes = this.checkLogin('../write/write', '2');\r\n\t\t//console.log(loginRes);\r\n\t\tif (!loginRes) {\r\n\t\t\treturn false;\r\n\t\t}\n        //加载我的文章\r\n\t\t_self=this;\n        this.arts = [];\n        page = 1;\n        this.getArtList();\n        // 加载会员信息  查询文章总数，查询积分，查询余额  效果还不太好\r\n\t\tdb.collection('user') // 注意collection方法内需要传入所有用到的表名，用逗号分隔，主表需要放在第一位\r\n\t\t  .where({\r\n\t\t\t  //u_openid:\"oRrdQt-jgZT-72IprQHsbglYWvhU\"\r\n\t\t\t  u_openid:uni.getStorageSync('SUID')\r\n\t\t  })\r\n\t\t  .get()\r\n\t\t  .then(res => {\r\n\t\t    //console.log(res);\r\n\t\t\t/*_self.user[\"u_integral\"]=res.result.data[0].u_integral;\r\n\t\t\t_self.user[\"u_remainder\"]=res.result.data[0].u_remainder;*/\r\n\t\t\t_self.user=res.result.data[0];\r\n\t\t\t//console.log(_self.user)\r\n\t\t\tdb.collection('article').where({\r\n\t\t\t\t//u_openid:\"oRrdQt-jgZT-72IprQHsbglYWvhU\"\r\n\t\t\t\tu_openid:uni.getStorageSync('SUID')\r\n\t\t\t}).get({\r\n\t\t\t\tgetCount: true\r\n\t\t\t}).then(res => {\r\n\t\t\t//console.log(res);\r\n\t\t\tif(res.result.count == 0) {\r\n\t\t\t\t//_self.user[\"artCount\"]=0;\r\n\t\t\t\t_self.myArtCount=0;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t//_self.user[\"artCount\"]=res.result.count;\r\n\t\t\t\t_self.myArtCount=res.result.count;  //没法往对象里面插入元素。。。？\r\n\t\t\t}\r\n\t\t\t}).catch(err => {\r\n\t\t    console.error(err)\r\n\t\t  })\r\n\t\t  }).catch(err => {\r\n\t\t    console.error(err)\r\n\t\t  })\n    },\n    methods:{\n        editArt : function(e){\n            var artId = e.currentTarget.dataset.artid;\n            uni.navigateTo({\n                url:\"../editArt/editArt?artId=\"+artId\n            });\n        },\n        removeArt : function(e){\n            var artId = e.currentTarget.dataset.artid;\n            var index = e.currentTarget.dataset.index;\n            uni.showModal({\n                title:\"提示\",\n                content:\"确定要删除吗?\",\n                success:function(e){\n                    if(e.confirm == true){\r\n\t\t\t\t\t\tdb.collection('article').where({\r\n\t\t\t\t\t\t\t_id:artId\r\n\t\t\t\t\t\t}).remove()\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\tif(res.success == true){\r\n\t\t\t\t\t\t\t\t    uni.showToast({title: \"已删除\", icon:\"none\"});\r\n\t\t\t\t\t\t\t\t    _self.arts.splice(index, 1);\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t    uni.showToast({title: \"删除失败\", icon:\"none\"});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t  console.error(err)\r\n\t\t\t\t\t\t})\n                    }\n                }\n            });\n        },\n        getArtList : function(){  //获取文章信息，并且mysql分页  后端每次访问数据库分页，前端每次请求其中的一页\n            //再设计一个数组，二维  前端当它为空时，前端访问数据库  然后第二维作为列\r\n\t\t\t//不可能存在前端，负担太大，。。。其实还好   也可以使用组件\r\n\t\t\t//现在只是获取了，还没写分页算法\r\n\t\t\tif(this.loadMore != '点击加载更多'){return ;}\r\n            this.loadMore = '加载中...';\n\t\t\tdb.collection(\"article\").where({\r\n\t\t\t\t//u_openid:\"oRrdQt-jgZT-72IprQHsbglYWvhU\"\r\n\t\t\t\tu_openid:uni.getStorageSync('SUID')\r\n\t\t\t}).get({\r\n\t\t\t\tgetCount:true\r\n\t\t\t}).then(res => {\r\n\t\t\t//console.log(res);\r\n\t\t\tif(res.result.count >0){\r\n\t\t\t\tif(res.result.count==_self.arts.length) {_self.loadMore = '已经加载全部'; return;}\r\n\t\t\t\t//写完分页后上面的这一句去掉\r\n\t\t\t    this.arts = this.arts.concat(res.result.data);\r\n\t\t\t    //page++;\r\n\t\t\t    this.loadMore = '点击加载更多';\r\n\t\t\t}else if(res.result.count ==0){\r\n\t\t\t    this.loadMore = '已经加载全部';\r\n\t\t\t}\r\n\t\t\t}).catch(err => {\r\n\t\t    console.error(err)\r\n\t\t  })\r\n\t\t\t\n        }\n    }\n}\n</script>\n<style>\n.myface{width:88px; height:88px; border:5px solid #F1F2F3; border-radius:100%; margin:15px auto;}\n.myface image{width:100%; border-radius:100%;}\n.myart-list{width:100%; margin:8px 0; overflow:hidden; border-bottom:1px dashed #D7D8D9;}\n.myart-list .title{line-height:2em; width:100%;}\n.myart-list .btns{line-height:2em; width:100%;}\n.myart-list .btns view{float:right; padding:0 6px; margin:0 5px; color:#00B26A;}\n.myart-list .btns view:last-child{color:#F76260;}\n.loadMore{width:100%; padding:8px 0; text-align:center; color:#CCCCCC;}\r\n/* .grace-box-banner{ border:1px solid} */\n</style>","import mod from \"-!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./my.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HbuilderXalpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./my.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1607082826506\n      var cssReload = require(\"D:/HbuilderXalpha/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}